{"id":"ADR-R01","title":"Rust Edition and MSRV","status":"approved","decision":"Rust 2021 edition, MSRV 1.75+ (for async fn in traits, C-string literals)","rationale":"2021 edition provides modern syntax, cleaner captures in closures, IntoIterator for arrays. Pin MSRV in Cargo.toml rust-version field for CI enforcement.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","runtime"],"config":{"Cargo.toml":{"rust-version":"1.75","edition":"2021"}}}
{"id":"ADR-R02","title":"Error Handling","status":"approved","decision":"thiserror for library errors, anyhow for application/binary errors. Native Result<T, E> everywhere.","rationale":"Rust's Result is the ADR-021 pattern natively. thiserror generates Display/Error impls with zero runtime cost. anyhow provides ergonomic error chaining for binaries where concrete types aren't needed.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["code-quality","patterns"],"libraries":{"lib":"thiserror","bin":"anyhow"},"pattern":"fn foo() -> Result<T, MyError>"}
{"id":"ADR-R03","title":"Linter and Formatter","status":"approved","decision":"rustfmt for formatting, clippy with pedantic lints for linting","rationale":"Both ship with rustup, zero additional deps. Clippy catches common mistakes, pedantic encourages idiomatic Rust. Deny warnings in CI.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","dx"],"config":{"clippy.toml":{"warn":["clippy::pedantic","clippy::nursery"],"allow":["clippy::module_name_repetitions"]},"rustfmt.toml":{"edition":"2021","max_width":100}}}
{"id":"ADR-R04","title":"Testing Framework","status":"approved","decision":"Built-in #[test] and cargo test. No external test runner.","rationale":"Rust's native testing is excellent. Use #[cfg(test)] modules for unit tests, tests/ directory for integration tests. Add rstest for parameterized tests if needed.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","testing"],"libraries":{"parameterized":"rstest","mocking":"mockall","assertions":"assert_matches (std), or pretty_assertions","temp_files":"tempfile"}}
{"id":"ADR-R05","title":"Project Structure","status":"approved","decision":"Standard Cargo layout: src/lib.rs for library, src/main.rs for binary, tests/ for integration tests","rationale":"Cargo conventions are well-established. Separating lib.rs from main.rs enables both library usage and CLI in one crate.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["conventions","architecture"],"structure":{"src/lib.rs":"Library root (pub API)","src/main.rs":"Binary entry point (thin wrapper)","tests/":"Integration tests","benches/":"Benchmarks (criterion)","examples/":"Example binaries"}}
{"id":"ADR-R06","title":"Serialization","status":"approved","decision":"serde with serde_json/serde_yaml for serialization","rationale":"De facto standard, zero-cost abstractions via derive macros, excellent ecosystem support. Use #[serde(deny_unknown_fields)] for strict parsing.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","validation"],"derives":["Serialize","Deserialize"]}
{"id":"ADR-R07","title":"CLI Framework","status":"approved","decision":"clap v4 with derive macros over structopt/argh","rationale":"Industry standard, excellent derive API, auto-generated help/completions, subcommand support. structopt merged into clap v3+.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","cli"],"features":["derive","cargo","env"]}
{"id":"ADR-R08","title":"Logging and Tracing","status":"approved","decision":"tracing over log/env_logger","rationale":"Structured, span-based instrumentation. Works for both logging and distributed tracing. Use tracing-subscriber for output formatting.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","observability"],"crates":{"core":"tracing","subscriber":"tracing-subscriber","json":"tracing-subscriber with json feature"}}
{"id":"ADR-R09","title":"Async Runtime","status":"approved","decision":"tokio for async, with tokio::fs for file operations","rationale":"Most mature async runtime, excellent ecosystem (axum, reqwest, sqlx). Use #[tokio::main] for binaries. For sync-heavy CLI tools, async may be unnecessary.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","async"],"features":["rt-multi-thread","fs","sync","macros"]}
{"id":"ADR-R10","title":"HTTP Client","status":"approved","decision":"reqwest for HTTP client (async), ureq for sync-only contexts","rationale":"reqwest is async-first, built on hyper/tokio, excellent API. ureq for when you don't want tokio dependency.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","http"]}
{"id":"ADR-R11","title":"Git Hooks","status":"approved","decision":"pre-commit with cargo fmt --check, cargo clippy, cargo test","rationale":"Same pre-commit framework as Python projects. Consistent DX across polyglot repos.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["tooling","dx"],"hooks":["cargo fmt --check","cargo clippy -- -D warnings","cargo test"]}
{"id":"ADR-R12","title":"Documentation","status":"approved","decision":"Rustdoc with doc-tests, README.md with cargo-readme sync","rationale":"Rustdoc is excellent, doc-tests ensure examples compile. Use #![warn(missing_docs)] for public API coverage.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["documentation","conventions"],"lints":["missing_docs","rustdoc::missing_crate_level_docs"]}
{"id":"ADR-R13","title":"CI Pipeline","status":"approved","decision":"GitHub Actions with rust-toolchain.toml, caching via Swatinem/rust-cache","rationale":"rust-toolchain.toml pins versions. Rust-cache dramatically speeds up builds. Run fmt, clippy, test, and doc in parallel.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["ci","infrastructure"],"stages":["cargo fmt --check","cargo clippy -- -D warnings","cargo test --all-features","cargo doc --no-deps"]}
{"id":"ADR-R14","title":"Benchmarking","status":"approved","decision":"criterion for benchmarks over built-in #[bench]","rationale":"Statistical rigor, HTML reports, stable Rust support. Built-in bench requires nightly.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["testing","performance"],"crate":"criterion"}
{"id":"ADR-R15","title":"Security Scanning","status":"approved","decision":"cargo-audit for dependency vulnerabilities, cargo-deny for license/duplicate checking","rationale":"cargo-audit checks RustSec advisory database. cargo-deny enforces license policies and detects duplicate deps.","createdAt":"2025-12-05","updatedAt":"2025-12-05","tags":["security","ci"],"tools":["cargo-audit","cargo-deny"]}